<!DOCTYPE html>
<html lang="en">
<head>
    <title>Map project</title>
    <meta charset='utf-8' />
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no'/>
    <script src='https://api.mapbox.com/mapbox-gl-js/v1.0.0/mapbox-gl.js'></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v1.0.0/mapbox-gl.css' rel='stylesheet'/>
	<link href="styles.css" rel="stylesheet" type="text/css">
    <link href="legendstyle.css" rel="stylesheet" type="text/css">
    <link href="markerstyles.css" rel="stylesheet" type="text/css">
</head>
<body>
    <div id='map'></div>
    
    <div class="legend">
        <div class="legend-title">How does population density correlate with location of places?</div>

        <div class="legend-location">
            <select class="legend-dropdown" onchange="addLayer()"> 
                <option value="" selected="selected">Select a place</option> 
            </select> 
            <div class="count hiddenOnMobile"><span>Total: </span><span></span></div>
            <div class="location-description hiddenOnMobile"><span>Description: </span><span></span></div>
        </div>

        <div class="legend-info hiddenOnMobile">
            <div class="legend-pins">
                <div><img class="blue pin" src="./pin-yellow.png">  = The average/mean coordinate of the selected location</div>
                <div><img class="pink pin" src="./pin-yellow.png">  = The average/mean coordinate of ALL locations</div>
                <div><img class="green pin" src="./pin-yellow.png">  = The center of population</div>
            </div>
            <div class="legend-popdensity">
                <span class="legend-popdensity-title">population density (inhabitant per kmÂ²)</span>
            </div>
        </div>

        <div href="#" onclick="showInfo()" id="show-more-info">Show <span id="moreless">more</span> info...</div>
    </div>
    <script>
        mapboxgl.accessToken = 'pk.eyJ1IjoiZGlnaHQiLCJhIjoiY2p4ZW5nanRjMG9wMzNvczhxOXprMXl4NiJ9.fmrU8kIKNnTnb6KyJ9Y1Hw'//'pk.eyJ1IjoiZGlnaHQiLCJhIjoiY2p4ZW5nanRjMG9wMzNvczhxOXprMXl4NiJ9.fmrU8kIKNnTnb6KyJ9Y1Hw'
        
        let map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapbox/streets-v11',//'mapbox://styles/dight/ckj41nuc91m7j19nztxq3vzp6', 
        center: [14.750297690342082, 58.112382521764154],
        zoom: 2,
        //attributionControl: false,
        //maxBounds: [[-5.994038888237595, 50.168382388177804], [38.07293243872676, 71.8192427469669]]
        });

        //map.addControl(new mapboxgl.AttributionControl(), 'top-left');
        map.addControl(new mapboxgl.NavigationControl());

        map.on('load', zoomIn)

        function zoomIn() {
            map.flyTo({
                // These options control the ending camera position: centered at the target, at zoom level 9, and north up.
                center: [14.750297690342082, 58.112382521764154],
                zoom: 5,
                bearing: 0,
                // These options control the flight curve, making it move slowly and zoom out almost completely before starting to pan.
                speed: 0.2, // make the flying slow
                curve: 1, // change the speed at which it zooms out
                // This can be any easing function: it takes a number between 0 and 1 and returns another number between 0 and 1.
                easing: function (t) {
                return t;
                },
                // this animation is considered essential with respect to prefers-reduced-motion
                essential: true
            });
        }
        
    </script>
    <script src="data.js"></script>
    <script src="descriptions.js"></script>
    <script src="addmarkers.js"></script>
    <script src="createPlaces.js"></script>
    <script src="createPopDensity.js"></script>
    <script>
        function showInfo() {
            const showHide = [".legend-info", ".location-description", ".count"];
            for (let item of showHide) {
                document.querySelector(item).classList.toggle("hiddenOnMobile")
            }
            var isHidden = document.querySelector(showHide[0]).classList.contains("hiddenOnMobile");
            document.getElementById("moreless").textContent = isHidden ? "more" : "less";
        }
    </script>
</body>
</html>
